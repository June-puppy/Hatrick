<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hatrick</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Welcome Page -->
        <div id="welcome-page" class="welcome-page">
            <header class="header">
                <div class="logo-container">
                    <img src="logo.png" alt="Hatrick" class="logo">
                    <h1>Hatrick</h1>
                </div>
                <p class="muted">Your thinking cap for learning</p>
            </header>
            
            <div class="main-content">
            <div class="field-selection">
                <label class="field-label">What are you learning today?</label>
                <div class="field-labels-container">
                    <div class="field-label-option" data-field="Artificial Intelligence">
                        Artificial Intelligence
                        <button class="delete-field-btn" data-field="Artificial Intelligence" title="Delete field">×</button>
                    </div>
                    <div class="field-label-option" data-field="Landscape Architecture">
                        Landscape Architecture
                        <button class="delete-field-btn" data-field="Landscape Architecture" title="Delete field">×</button>
                    </div>
                    <div class="field-label-option" data-field="Python">
                        Python
                        <button class="delete-field-btn" data-field="Python" title="Delete field">×</button>
                    </div>
                    <div class="field-label-option add-new-label" data-field="add-new">+ Add New Field</div>
                </div>
                <div id="field-suggestions" class="field-suggestions" style="display: none;"></div>
            </div>

            <div class="question-divider"></div>

            <div class="experience-level">
                <h3>What's your experience level?</h3>
                <div class="star-rating">
                    <div class="star" data-level="beginner" title="Beginner">
                        <span class="star-icon">★</span>
                    </div>
                    <div class="star" data-level="intermediate" title="Intermediate">
                        <span class="star-icon">★</span>
                    </div>
                    <div class="star" data-level="professional" title="Professional">
                        <span class="star-icon">★</span>
                    </div>
                </div>
            </div>
            
            <div class="welcome-footer">
                <button id="continue-btn" class="btn-continue" disabled>Continue</button>
            </div>
            
            </div> <!-- End main-content -->
            
            <footer class="welcome-page-footer">
                <p class="footer-text" id="welcome-footer-clickable">See how far you've come</p>
            </footer>
        </div>

        <!-- Main App (hidden initially) -->
        <div id="main-app" class="main-app" style="display: none;">
            <header class="main-header">
                <div class="header-logo">
                    <img src="logo.png" alt="Hatrick" class="header-icon">
                </div>
                <div class="user-settings">
                    <div class="settings-item clickable" id="field-setting">
                        <span class="settings-label">Field:</span>
                        <span id="current-field" class="settings-value clickable-value">Computer Science</span>
                    </div>
                    <div class="settings-item clickable" id="level-setting">
                        <span class="settings-label">Level:</span>
                        <span id="current-experience" class="settings-value clickable-value">Professional</span>
                    </div>
                </div>
            </header>
            
            <div class="main-content">
            
            <div id="download-status" class="download-status" style="display: none;">
                <div class="status-indicator">
                    <span class="status-dot loading"></span>
                    <span>Downloading AI models...</span>
                </div>
                <p class="muted">This may take a few minutes on first use</p>
            </div>

            <div class="card">
                <div class="smartread-tabs">
                    <button id="btn-core-finder" class="tab-button" data-tooltip="First Skim helps you quickly spot the key ideas, important terms, and the big picture of the article.">First Skim</button>
                    <button id="btn-reading-map" class="tab-button" data-tooltip="Mind Map provides one-sentence summaries for each paragraph, helping you quickly understand the structure and key points of the content.">Mind Map</button>
                    <button id="btn-vocab-pocket" class="tab-button">Dive In</button>
                </div>
                
                <div id="core-finder-results" class="core-finder-results" style="display: none;">
                    <div class="page-summary-section">
                        <div class="collapsible-header" id="summary-header">
                            <h3>Page Summary</h3>
                            <span class="toggle-triangle" id="summary-toggle"></span>
                        </div>
                        <div id="summary-list" class="summary-list">
                            <p class="muted">Loading summary...</p>
                        </div>
                    </div>
                    
                    <div class="core-finder-header">
                        <div class="collapsible-header" id="keywords-header">
                            <div class="header-left">
                                <h3>Keywords</h3>
                            </div>
                            <span class="toggle-triangle" id="keywords-toggle"></span>
                        </div>
                    </div>
                    <div id="core-keywords-list" class="core-keywords-list">
                        <p class="muted">Loading core keywords...</p>
                    </div>
                </div>
                
                <div id="reading-map-results" class="reading-map-results" style="display: none;">
                    <div id="reading-map-list" class="reading-map-list">
                        <p class="muted">Loading mind map...</p>
                    </div>
                </div>
                
                <div id="dive-in-results" class="dive-in-results" style="display: none;">
                    <div class="dive-in-section">
                        <div class="collapsible-header" id="term-explanation-header">
                            <h3>Term Explanation</h3>
                            <span class="toggle-triangle" id="term-explanation-toggle"></span>
                        </div>
                        <div id="term-explanation-content" class="collapsible-content">
                            <div id="selected-term-display" class="selected-term-display" style="display: none;">
                                <div class="term-info">
                                    <span id="selected-term-text" class="selected-term-text"></span>
                                    <button id="heart-button" class="heart-button" title="Add to favorites">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M12 21L10.55 19.7C8.86667 18.1834 7.475 16.875 6.375 15.775C5.275 14.675 4.4 13.6917 3.75 12.825C3.1 11.9417 2.64167 11.1334 2.375 10.4C2.125 9.66669 2 8.91669 2 8.15002C2 6.58336 2.525 5.27502 3.575 4.22502C4.625 3.17502 5.93333 2.65002 7.5 2.65002C8.36667 2.65002 9.19167 2.83336 9.975 3.20002C10.7583 3.56669 11.4333 4.08336 12 4.75003C12.5667 4.08336 13.2417 3.56669 14.025 3.20002C14.8083 2.83336 15.6333 2.65002 16.5 2.65002C18.0667 2.65002 19.375 3.17502 20.425 4.22502C21.475 5.27502 22 6.58336 22 8.15002C22 8.91669 21.8667 9.66669 21.6 10.4C21.35 11.1334 20.9 11.9417 20.25 12.825C19.6 13.6917 18.725 14.675 17.625 15.775C16.525 16.875 15.1333 18.1834 13.45 19.7L12 21ZM12 18.3C13.6 16.8667 14.9167 15.6417 15.95 14.625C16.9833 13.5917 17.8 12.7 18.4 11.95C19 11.1834 19.4167 10.5084 19.65 9.92503C19.8833 9.32503 20 8.73336 20 8.15002C20 7.15002 19.6667 6.31669 19 5.65003C18.3333 4.98336 17.5 4.65003 16.5 4.65003C15.7167 4.65003 14.9917 4.87503 14.325 5.32503C13.6583 5.75836 13.2 6.31669 12.95 7.00003H11.05C10.8 6.31669 10.3417 5.75836 9.675 5.32503C9.00833 4.87503 8.28333 4.65003 7.5 4.65003C6.5 4.65003 5.66667 4.98336 5 5.65003C4.33333 6.31669 4 7.15002 4 8.15002C4 8.73336 4.11667 9.32503 4.35 9.92503C4.58333 10.5084 5 11.1834 5.6 11.95C6.2 12.7 7.01667 13.5917 8.05 14.625C9.08333 15.6417 10.4 16.8667 12 18.3Z" fill="#1D1B20"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div id="term-explanation-results" class="term-explanation-results">
                                <p class="muted">Select a term on the page to get explanations</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dive-in-section">
                        <div class="collapsible-header" id="field-vocabulary-header">
                            <h3>Vocab Pocket</h3>
                            <span class="toggle-triangle" id="field-vocabulary-toggle"></span>
                        </div>
                        <div id="field-vocabulary-content" class="collapsible-content">
                            <p class="muted">Your field-specific vocabulary terms will appear here</p>
                        </div>
                    </div>
                    
                    <div class="dive-in-section">
                        <div class="collapsible-header" id="notes-header">
                            <div class="notes-header-content">
                                <h3>Notes</h3>
                                <button class="add-note-btn" id="add-note-btn" title="Add new note">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8 1V15M1 8H15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                </button>
                            </div>
                            <span class="toggle-triangle" id="notes-toggle"></span>
                        </div>
                        <div id="notes-content" class="collapsible-content">
                            <div class="sticker-notes-container">
                                <div class="sticker-note purple">
                                    <div class="sticker-header">
                                        <span class="sticker-title">Note</span>
                                        <button class="sticker-close">×</button>
                                    </div>
                                    <div class="sticker-content">
                                        <p>Click to edit your note...</p>
                                    </div>
                                </div>
                                <div class="sticker-note purple">
                                    <div class="sticker-header">
                                        <span class="sticker-title">Note</span>
                                        <button class="sticker-close">×</button>
                                    </div>
                                    <div class="sticker-content">
                                        <p>Click to edit your note...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dive-in-section">
                        <div class="collapsible-header" id="ask-hatrick-header">
                            <h3>Ask Hatrick</h3>
                            <span class="toggle-triangle" id="ask-hatrick-toggle"></span>
                        </div>
                        <div id="ask-hatrick-content" class="collapsible-content">
                            <div class="ask-hatrick-interface">
                                <div class="chat-container">
                                    <div id="chat-messages" class="chat-messages">
                                        <div class="chat-message hatrick-message">
                                            <div class="message-avatar">🎩</div>
                                            <div class="message-content">
                                                <p>Hi! I'm Hatrick, your learning assistant. Ask me anything about the content on this page!</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="chat-input-container">
                                        <input type="text" id="ask-hatrick-input" class="chat-input" placeholder="Ask Hatrick a question..." maxlength="500">
                                        <button id="ask-hatrick-send" class="chat-send-btn">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M15.854 8.354l-7-7a.5.5 0 0 0-.708.708L14.293 8l-6.147 6.146a.5.5 0 0 0 .708.708l7-7z" fill="currentColor"/>
                                                <path d="M0 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1H.5A.5.5 0 0 1 0 8z" fill="currentColor"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Term Explanation Results (hidden initially) -->
            <div id="term-explanation-section" class="card" style="display: none;">
                <h2>Term Explanation</h2>
                <div class="term-section">
                    <div class="selected-term">
                        <strong>Selected term:</strong> <span id="selected-term-text">Unknown term</span>
                    </div>
                    <div class="explanation-tabs">
                        <button class="explanation-tab active" data-level="beginner">Simple</button>
                        <button class="explanation-tab" data-level="advanced">Detailed</button>
                    </div>
                    <div class="explanation-content">
                        <div id="term-explain-beginner" class="explanation-box"></div>
                        <div id="term-explain-advanced" class="explanation-box" style="display: none;"></div>
                    </div>
                <div class="explanation-actions">
                    <button id="btn-save-term" class="btn btn-primary">Save to Vocabulary</button>
                    <button id="btn-clear-selected-highlights" class="btn btn-secondary">Clear Highlights</button>
                </div>
                </div>
            </div>

            
            </div> <!-- End main-content -->
            
            <footer class="main-footer">
                <p class="footer-text" id="footer-clickable">See how far you've come</p>
            </footer>
        </div>
        
        <!-- Hats Collection Page -->
        <div id="hats-page" class="hats-page" style="display: none;">
            <div class="main-content">
                <div class="card">
                    <!-- Header Section -->
                    <div class="hats-header">
                        <div class="header-top">
                            <button id="back-to-main" class="back-button">
                                <img src="C:\Users\yuehy\Downloads\Materials\back arrow.svg" alt="Back" class="back-arrow-icon">
                            </button>
                        </div>
                        <h1 class="hats-title">Hats You Have Collected</h1>
                    </div>
                    
                    <!-- Hats Collection Grid -->
                    <div class="hats-collection-section">
                        <div class="hats-grid" id="hats-grid">
                            <!-- Dynamic hat cards will be generated here -->
                        </div>
                    </div>
                </div>
                
                <!-- Vocabulary Pocket Card -->
                <div class="card">
                    <div class="vocabulary-pocket-section">
                        <div class="section-header">
                            <h3 class="section-title">Field Vocabulary</h3>
                            <span class="collapse-icon"></span>
                        </div>
                        <div class="vocabulary-grid">
                            <div class="vocab-card">FPGA</div>
                            <div class="vocab-card">FPGA</div>
                            <div class="vocab-card">FPGA</div>
                            <div class="vocab-card">FPGA</div>
                        </div>
                    </div>
                </div>
                    
                <!-- Notes Card -->
                <div class="card">
                    <div class="notes-section">
                        <div class="section-header">
                            <h3 class="section-title">Notes</h3>
                            <span class="collapse-icon"></span>
                        </div>
                        <div class="notes-grid">
                            <div class="note-card">
                                <div class="note-title">XXXXXXXXXXX</div>
                                <div class="note-content">Lorem ipsum dolor sit ame consectetur. Nunc arcu faucibus ultrices dui urna ipsum. Urna neque faucibu sed scelerisque vitae quis laoreet sed rhoncus.</div>
                                <div class="note-date">date: 10-08-2025</div>
                            </div>
                            <div class="note-card add-note">
                                <div class="add-note-text">Add Note</div>
                            </div>
                            <div class="note-card">
                                <div class="note-title">XXXXXXXXXXX</div>
                                <div class="note-content">Lorem ipsum dolor sit ame consectetur. Nunc arcu faucibus ultrices dui urna ipsum. Urna neque faucibu sed scelerisque vitae quis laoreet sed rhoncus.</div>
                                <div class="note-date">date: 10-08-2025</div>
                            </div>
                            <div class="note-card">
                                <div class="note-title">XXXXXXXXXXX</div>
                                <div class="note-content">Lorem ipsum dolor sit ame consectetur. Nunc arcu faucibus ultrices dui urna ipsum. Urna neque faucibu sed scelerisque vitae quis laoreet sed rhoncus.</div>
                                <div class="note-date">date: 10-08-2025</div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>

    <!-- New Field Welcome Page -->
    <div id="new-field-welcome" class="welcome-page" style="display: none;">
        <div class="welcome-content">
            <div class="hat-animation-container">
                <img id="welcome-hat-image" src="" alt="New Hat" class="hat-animation">
            </div>
            <h1 id="welcome-title" class="welcome-title">🎉 Welcome to Your New Field!</h1>
            <p id="welcome-message" class="welcome-message">You've gained a new hat! Start exploring this exciting field and collect vocabulary terms along the way.</p>
            <div class="welcome-actions">
                <button class="btn btn-primary" id="start-exploring">Start Exploring</button>
            </div>
        </div>
    </div>

    <script>
        console.log('🔧 HTML loaded, about to load panel.js...');
    </script>
    <script src="panel.js"></script>
    <script>
        console.log('🔧 panel.js script tag processed');
    </script>
</body>
</html>